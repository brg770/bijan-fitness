<!DOCTYPE html>
<html lang="fa" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>برنامه بدنسازی و تغذیه شخصی‌سازی‌شده</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        body {
            font-family: 'Inter', sans-serif;
            background-color: #f3f4f6;
        }
        .container-wrapper {
            max-width: 900px;
            margin: auto;
            padding: 1.5rem;
        }
        .card {
            background-color: white;
            padding: 2rem;
            border-radius: 1.5rem;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
        }
        .input-group label {
            display: block;
            margin-bottom: 0.5rem;
            font-weight: 500;
        }
        .input-group input, .input-group select, .input-group textarea {
            width: 100%;
            padding: 0.75rem;
            border: 1px solid #d1d5db;
            border-radius: 0.75rem;
            transition: all 0.2s ease-in-out;
        }
        .input-group input:focus, .input-group select:focus, .input-group textarea:focus {
            border-color: #3b82f6;
            box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.5);
            outline: none;
        }
        #loading-indicator {
            display: none;
        }
        .disclaimer {
            background-color: #fff3cd;
            border: 1px solid #ffeeba;
            color: #856404;
            padding: 1rem;
            border-radius: 0.75rem;
            margin-top: 1.5rem;
            text-align: center;
        }
        .audio-button {
            background-color: #10B981;
            color: white;
            padding: 0.75rem 1.5rem;
            border-radius: 0.75rem;
            font-weight: bold;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 0.5rem;
            transition: background-color 0.2s;
        }
        .audio-button:hover {
            background-color: #059669;
        }
    </style>
</head>
<body class="bg-gray-100 flex items-center justify-center min-h-screen">
    <div class="container-wrapper">
        <div class="card">
            <h1 class="text-3xl font-bold text-center text-gray-800 mb-6">برنامه بدنسازی و تغذیه شخصی‌سازی‌شده</h1>
            <p class="text-center text-gray-600 mb-8">
                تصاویری از بدن خود را آپلود کرده و اطلاعات لازم را وارد کنید تا هوش مصنوعی یک برنامه تمرینی و غذایی شخصی‌سازی‌شده برای شما بسازد.
            </p>

            <div class="disclaimer mb-8">
                <p>
                    ⚠️ **سلب مسئولیت:** این برنامه توسط هوش مصنوعی طراحی شده است. لطفاً قبل از شروع هر برنامه تمرینی یا غذایی، با یک مربی ورزشی یا متخصص تغذیه مشورت کنید.
                </p>
            </div>

            <form id="analyzer-form" class="space-y-6">
                <!-- Image Uploads -->
                <div class="input-group">
                    <label for="body-image-front" class="text-gray-700">تصویر بدن (نمای جلو):</label>
                    <input type="file" id="body-image-front" accept="image/*" class="w-full text-gray-700">
                </div>
                <div class="input-group">
                    <label for="body-image-back" class="text-gray-700">تصویر بدن (نمای پشت):</label>
                    <input type="file" id="body-image-back" accept="image/*" class="w-full text-gray-700">
                </div>
                <div class="input-group">
                    <label for="body-image-side" class="text-gray-700">تصویر بدن (نمای پهلو):</label>
                    <input type="file" id="body-image-side" accept="image/*" class="w-full text-gray-700">
                </div>

                <!-- Body Parameters -->
                <div class="grid md:grid-cols-2 gap-6">
                    <div class="input-group">
                        <label for="gender" class="text-gray-700">جنسیت:</label>
                        <select id="gender" class="w-full">
                            <option value="male">مرد</option>
                            <option value="female">زن</option>
                        </select>
                    </div>
                    <div class="input-group">
                        <label for="age" class="text-gray-700">سن:</label>
                        <input type="number" id="age" placeholder="مثلاً 30" class="w-full">
                    </div>
                    <div class="input-group">
                        <label for="height" class="text-gray-700">قد (سانتی‌متر):</label>
                        <input type="number" id="height" placeholder="مثلاً 175" class="w-full">
                    </div>
                    <div class="input-group">
                        <label for="weight" class="text-gray-700">وزن (کیلوگرم):</label>
                        <input type="number" id="weight" placeholder="مثلاً 70" class="w-full">
                    </div>
                    <div class="input-group">
                        <label for="chest-circ" class="text-gray-700">دور سینه (سانتی‌متر):</label>
                        <input type="number" id="chest-circ" placeholder="مثلاً 100" class="w-full">
                    </div>
                    <div class="input-group">
                        <label for="arm-circ" class="text-gray-700">دور بازو (سانتی‌متر):</label>
                        <input type="number" id="arm-circ" placeholder="مثلاً 35" class="w-full">
                    </div>
                    <div class="input-group">
                        <label for="waist-circ" class="text-gray-700">دور کمر (سانتی‌متر):</label>
                        <input type="number" id="waist-circ" placeholder="مثلاً 85" class="w-full">
                    </div>
                    <div class="input-group">
                        <label for="hip-circ" class="text-gray-700">دور باسن (سانتی‌متر):</label>
                        <input type="number" id="hip-circ" placeholder="مثلاً 95" class="w-full">
                    </div>
                    <div class="input-group">
                        <label for="thigh-circ" class="text-gray-700">دور ران (سانتی‌متر):</label>
                        <input type="number" id="thigh-circ" placeholder="مثلاً 55" class="w-full">
                    </div>
                    <div class="input-group">
                        <label for="calf-circ" class="text-gray-700">دور ساق پا (سانتی‌متر):</label>
                        <input type="number" id="calf-circ" placeholder="مثلاً 38" class="w-full">
                    </div>
                </div>

                <!-- Goal and Experience -->
                <div class="grid md:grid-cols-2 gap-6">
                    <div class="input-group">
                        <label for="goal" class="text-gray-700">هدف شما از بدنسازی چیست؟</label>
                        <select id="goal" class="w-full">
                            <option value="muscle_gain">افزایش حجم عضلانی (Bulking)</option>
                            <option value="fat_loss">کاهش چربی (Cutting)</option>
                            <option value="maintenance">حفظ وزن</option>
                        </select>
                    </div>
                    <div class="input-group">
                        <label for="experience" class="text-gray-700">سابقه ورزشی شما:</label>
                        <select id="experience" class="w-full">
                            <option value="beginner">مبتدی</option>
                            <option value="intermediate">متوسط</option>
                            <option value="advanced">حرفه‌ای</option>
                        </select>
                    </div>
                    <div class="input-group md:col-span-2">
                        <label for="injuries" class="text-gray-700">محدودیت‌ها یا آسیب‌دیدگی‌های احتمالی:</label>
                        <textarea id="injuries" rows="3" placeholder="مثلاً: آسیب به زانوی چپ یا درد در ناحیه کمر" class="w-full"></textarea>
                    </div>
                </div>

                <!-- Diet Type -->
                <div class="input-group">
                    <label for="diet-type" class="text-gray-700">نوع رژیم غذایی شما:</label>
                    <select id="diet-type" class="w-full">
                        <option value="normal">عادی (شامل گوشت و مرغ)</option>
                        <option value="vegetarian">گیاه‌خواری (فقط سبزیجات)</option>
                        <option value="pescetarian">پسکاتارین (گیاه‌خواری + ماهی)</option>
                    </select>
                </div>

                <button type="submit" class="w-full bg-blue-600 hover:bg-blue-700 text-white font-bold py-3 px-4 rounded-xl shadow-lg transition-colors">
                    تحلیل و دریافت برنامه ✨
                </button>
            </form>

            <!-- Loading Indicator -->
            <div id="loading-indicator" class="mt-8 text-center text-gray-600">
                <div class="flex items-center justify-center space-x-2">
                    <svg class="animate-spin -ml-1 mr-3 h-5 w-5 text-blue-500" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24">
                        <circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle>
                        <path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path>
                    </svg>
                    <span>در حال تحلیل بدن شما... لطفاً صبر کنید.</span>
                </div>
            </div>

            <!-- Results Section -->
            <div id="results" class="mt-8 hidden">
                <h2 class="text-2xl font-bold text-gray-800 mb-4 text-center">نتایج تحلیل</h2>
                <button id="speak-button" class="audio-button mb-4">
                    <svg class="w-6 h-6" fill="currentColor" viewBox="0 0 24 24">
                        <path d="M14 3.23v2.06c2.89.81 5 3.53 5 6.71s-2.11 5.9-5 6.71v2.06c4.01-.91 7-4.49 7-8.77s-2.99-7.86-7-8.77zM16.5 12c0-2.32-1.4-4.34-3.5-5.32v10.64c2.1-.98 3.5-3 3.5-5.32zM12 21.68V24c4.49-.78 8-4.7 8-9.68s-3.51-8.9-8-9.68v2.32c3.27.81 5.75 3.86 5.75 7.36s-2.48 6.55-5.75 7.36zM9 9H5v6h4l5 5V4L9 9z"/>
                    </svg>
                    گوش دادن به برنامه ✨
                </button>
                <div id="result-content" class="prose max-w-none text-right"></div>
            </div>

            <!-- Nutrition Planner Section -->
            <div class="card mt-8">
                <h2 class="text-2xl font-bold text-center text-gray-800 mb-6">برنامه غذایی ✨</h2>
                <form id="nutrition-form" class="space-y-6">
                    <div class="input-group">
                        <label for="nutrition-input" class="text-gray-700">توضیحات بیشتر برای برنامه غذایی:</label>
                        <textarea id="nutrition-input" rows="4" placeholder="مثلاً: من عاشق قرمه‌سبزی هستم و از تخم‌مرغ متنفرم. لطفاً برنامه‌ای با این نکات برای من طراحی کن." class="w-full"></textarea>
                    </div>
                    <button type="submit" class="w-full bg-green-600 hover:bg-green-700 text-white font-bold py-3 px-4 rounded-xl shadow-lg transition-colors">
                        تولید برنامه غذایی ✨
                    </button>
                </form>
                <div id="nutrition-results" class="mt-8 hidden">
                    <h3 class="text-xl font-bold text-gray-800 mb-4 text-center">برنامه غذایی شخصی‌سازی‌شده</h3>
                    <div id="nutrition-content" class="prose max-w-none text-right"></div>
                </div>
            </div>
        </div>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const form = document.getElementById('analyzer-form');
            const nutritionForm = document.getElementById('nutrition-form');
            const loadingIndicator = document.getElementById('loading-indicator');
            const resultsDiv = document.getElementById('results');
            const resultContent = document.getElementById('result-content');
            const speakButton = document.getElementById('speak-button');
            const nutritionResultsDiv = document.getElementById('nutrition-results');
            const nutritionContent = document.getElementById('nutrition-content');

            // تابع تبدیل Markdown به HTML
            const markdownToHtml = (markdown) => {
                let html = markdown
                    .replace(/^### (.*$)/gim, '<h3>$1</h3>')
                    .replace(/^## (.*$)/gim, '<h2>$1</h2>')
                    .replace(/^# (.*$)/gim, '<h1>$1</h1>')
                    .replace(/\*\*(.*?)\*\*/gim, '<strong>$1</strong>')
                    .replace(/\n/g, '<br>');
                return html;
            };

            // ارسال فرم اصلی تحلیل بدن
            form.addEventListener('submit', async (e) => {
                e.preventDefault();

                loadingIndicator.style.display = 'flex';
                resultsDiv.style.display = 'none';
                resultContent.innerHTML = '';
                nutritionResultsDiv.style.display = 'none';
                nutritionContent.innerHTML = '';

                const gender = document.getElementById('gender').value;
                const age = document.getElementById('age').value;
                const height = document.getElementById('height').value;
                const weight = document.getElementById('weight').value;
                const chestCirc = document.getElementById('chest-circ').value;
                const armCirc = document.getElementById('arm-circ').value;
                const waistCirc = document.getElementById('waist-circ').value;
                const hipCirc = document.getElementById('hip-circ').value;
                const thighCirc = document.getElementById('thigh-circ').value;
                const calfCirc = document.getElementById('calf-circ').value;
                const goal = document.getElementById('goal').value;
                const experience = document.getElementById('experience').value;
                const injuries = document.getElementById('injuries').value;
                const dietType = document.getElementById('diet-type').value;
                
                const imageFileFront = document.getElementById('body-image-front').files[0];
                const imageFileBack = document.getElementById('body-image-back').files[0];
                const imageFileSide = document.getElementById('body-image-side').files[0];

                if (!imageFileFront || !height || !weight || !age) {
                    loadingIndicator.style.display = 'none';
                    alert("لطفاً تصویر نمای جلو و پارامترهای قد، وزن و سن را وارد کنید.");
                    return;
                }

                try {
                    const base64ImageFront = await new Promise((resolve, reject) => {
                        const reader = new FileReader();
                        reader.onload = () => resolve(reader.result.split(',')[1]);
                        reader.onerror = error => reject(error);
                        reader.readAsDataURL(imageFileFront);
                    });

                    let base64ImageBack = null;
                    if (imageFileBack) {
                        base64ImageBack = await new Promise((resolve, reject) => {
                            const reader = new FileReader();
                            reader.onload = () => resolve(reader.result.split(',')[1]);
                            reader.onerror = error => reject(error);
                            reader.readAsDataURL(imageFileBack);
                        });
                    }

                    let base64ImageSide = null;
                    if (imageFileSide) {
                        base64ImageSide = await new Promise((resolve, reject) => {
                            const reader = new FileReader();
                            reader.onload = () => resolve(reader.result.split(',')[1]);
                            reader.onerror = error => reject(error);
                            reader.readAsDataURL(imageFileSide);
                        });
                    }
                    
                    const promptText = `
                    You are a world-class bodybuilding and nutrition coach. Analyze the body structure in the images provided, along with the following parameters, to create a personalized muscle growth plan. The user wants to ${goal.replace('_', ' ')}.

                    **Body Parameters:**
                    - Gender: ${gender === 'male' ? 'Male' : 'Female'}
                    - Age: ${age} years old
                    - Height: ${height} cm
                    - Weight: ${weight} kg
                    - Chest Circumference: ${chestCirc} cm
                    - Arm Circumference: ${armCirc} cm
                    - Waist Circumference: ${waistCirc} cm
                    - Hip Circumference: ${hipCirc} cm
                    - Thigh Circumference: ${thighCirc} cm
                    - Calf Circumference: ${calfCirc} cm
                    - Experience Level: ${experience}
                    - Injuries/Limitations: ${injuries || 'None'}
                    - Diet Type: ${dietType}

                    **Instructions:**
                    1.  **Body Analysis:** Analyze the physique in the images. Identify areas that need more growth (e.g., specific muscle groups that are underdeveloped) and areas that are well-developed. Be professional and encouraging.
                    2.  **Workout Plan:** Create a one-week workout plan focusing on the user's goal. The plan should be detailed and include exercises, sets, and reps. Specify which muscle groups are targeted and which areas need more attention.
                    3.  **Nutrition Plan:** Provide a sample one-day nutrition plan for muscle growth. The plan must be compatible with an Iranian taste palate and use common Iranian ingredients. Include a list of recommended foods and a sample meal plan for breakfast, lunch, and dinner.

                    Respond in Persian, using Markdown for clear formatting. The output should be easy to read and structured with headings. Do not mention that you are an AI.
                    `;

                    const parts = [
                        { text: promptText },
                        { inlineData: { mimeType: imageFileFront.type, data: base64ImageFront } }
                    ];

                    if (base64ImageBack) {
                        parts.push({ inlineData: { mimeType: imageFileBack.type, data: base64ImageBack } });
                    }
                    if (base64ImageSide) {
                        parts.push({ inlineData: { mimeType: imageFileSide.type, data: base64ImageSide } });
                    }

                    const payload = {
                        contents: [{ role: "user", parts: parts }]
                    };
                    
                    const apiKey = "";
                    const apiUrl = `https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash-preview-05-20:generateContent?key=${apiKey}`;
                    
                    const response = await fetch(apiUrl, {
                        method: 'POST',
                        headers: { 'Content-Type': 'application/json' },
                        body: JSON.stringify(payload)
                    });
                    
                    if (!response.ok) {
                        const errorData = await response.json();
                        throw new Error(`API Error: ${errorData.error.message}`);
                    }
                    
                    const result = await response.json();
                    const text = result?.candidates?.[0]?.content?.parts?.[0]?.text;
                    
                    if (text) {
                        resultContent.innerHTML = markdownToHtml(text);
                    } else {
                        resultContent.innerHTML = "<p>متأسفانه، نتوانستیم برنامه‌ای برای شما بسازیم. لطفاً دوباره تلاش کنید.</p>";
                    }
                    
                    loadingIndicator.style.display = 'none';
                    resultsDiv.style.display = 'block';
                    
                } catch (error) {
                    console.error('An error occurred:', error);
                    loadingIndicator.style.display = 'none';
                    alert("خطایی رخ داد. لطفاً مطمئن شوید که تصاویر معتبر و اطلاعات صحیح وارد کرده‌اید.");
                }
            });

            // ارسال فرم برنامه غذایی
            nutritionForm.addEventListener('submit', async (e) => {
                e.preventDefault();

                loadingIndicator.style.display = 'flex';
                nutritionResultsDiv.style.display = 'none';
                nutritionContent.innerHTML = '';
                
                const dietType = document.getElementById('diet-type').value;
                const nutritionInput = document.getElementById('nutrition-input').value;

                if (!nutritionInput) {
                     alert("لطفاً اطلاعات بیشتری برای تولید برنامه غذایی وارد کنید.");
                     return;
                }

                try {
                    const promptText = `
                    You are a professional nutritionist specializing in Iranian cuisine. Based on a ${dietType} diet and the user's preferences: "${nutritionInput}", create a one-day sample nutrition plan for muscle growth. The plan should be compatible with Iranian taste and ingredients. Use Markdown for clear formatting. The output should be easy to read and structured with headings. Do not mention that you are an AI.
                    `;

                    const payload = {
                        contents: [{ role: "user", parts: [{ text: promptText }] }]
                    };
                    
                    const apiKey = "";
                    const apiUrl = `https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash-preview-05-20:generateContent?key=${apiKey}`;
                    
                    const response = await fetch(apiUrl, {
                        method: 'POST',
                        headers: { 'Content-Type': 'application/json' },
                        body: JSON.stringify(payload)
                    });
                    
                    if (!response.ok) {
                        const errorData = await response.json();
                        throw new Error(`API Error: ${errorData.error.message}`);
                    }
                    
                    const result = await response.json();
                    const text = result?.candidates?.[0]?.content?.parts?.[0]?.text;
                    
                    if (text) {
                        nutritionContent.innerHTML = markdownToHtml(text);
                    } else {
                        nutritionContent.innerHTML = "<p>متأسفانه، نتوانستیم برنامه‌ای برای شما بسازیم. لطفاً دوباره تلاش کنید.</p>";
                    }

                    loadingIndicator.style.display = 'none';
                    nutritionResultsDiv.style.display = 'block';

                } catch (error) {
                    console.error('An error occurred:', error);
                    loadingIndicator.style.display = 'none';
                    alert("خطایی در تولید برنامه غذایی رخ داد.");
                }
            });

            // قابلیت تبدیل متن به گفتار
            speakButton.addEventListener('click', async () => {
                const textToSpeak = resultContent.innerText;
                if (!textToSpeak) {
                    alert('ابتدا باید برنامه را تولید کنید.');
                    return;
                }
                
                const audioContext = new (window.AudioContext || window.webkitAudioContext)();

                // تابع تبدیل Base64 به ArrayBuffer
                const base64ToArrayBuffer = (base64) => {
                    const binaryString = atob(base64);
                    const len = binaryString.length;
                    const bytes = new Uint8Array(len);
                    for (let i = 0; i < len; i++) {
                        bytes[i] = binaryString.charCodeAt(i);
                    }
                    return bytes.buffer;
                };

                // تابع تبدیل PCM به فرمت WAV
                const pcmToWav = (pcmData, sampleRate) => {
                    const buffer = new ArrayBuffer(44 + pcmData.length * 2);
                    const view = new DataView(buffer);

                    /* RIFF identifier */
                    view.setUint32(0, 0x52494646, true);
                    /* file length */
                    view.setUint32(4, 36 + pcmData.length * 2, true);
                    /* RIFF type */
                    view.setUint32(8, 0x57415645, true);
                    /* format chunk identifier */
                    view.setUint32(12, 0x666d7420, true);
                    /* format chunk length */
                    view.setUint32(16, 16, true);
                    /* sample format (raw) */
                    view.setUint16(20, 1, true);
                    /* channel count */
                    view.setUint16(22, 1, true);
                    /* sample rate */
                    view.setUint32(24, sampleRate, true);
                    /* byte rate (sample rate * block align) */
                    view.setUint32(28, sampleRate * 2, true);
                    /* block align (channels * bytes per sample) */
                    view.setUint16(32, 2, true);
                    /* bits per sample */
                    view.setUint16(34, 16, true);
                    /* data chunk identifier */
                    view.setUint32(36, 0x64617461, true);
                    /* data chunk length */
                    view.setUint32(40, pcmData.length * 2, true);

                    let offset = 44;
                    for (let i = 0; i < pcmData.length; i++) {
                        view.setInt16(offset, pcmData[i], true);
                        offset += 2;
                    }

                    return new Blob([view], { type: 'audio/wav' });
                };

                try {
                    speakButton.disabled = true;
                    speakButton.textContent = 'در حال تولید صدا...';
                    
                    const payload = {
                        contents: [{
                            parts: [{ text: textToSpeak }]
                        }],
                        generationConfig: {
                            responseModalities: ["AUDIO"],
                            speechConfig: {
                                voiceConfig: {
                                    prebuiltVoiceConfig: { voiceName: "Kore" }
                                }
                            }
                        },
                        model: "gemini-2.5-flash-preview-tts"
                    };

                    const apiKey = "";
                    const apiUrl = `https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash-preview-tts:generateContent?key=${apiKey}`;

                    const response = await fetch(apiUrl, {
                        method: 'POST',
                        headers: { 'Content-Type': 'application/json' },
                        body: JSON.stringify(payload)
                    });

                    if (!response.ok) {
                        const errorData = await response.json();
                        throw new Error(`TTS API Error: ${errorData.error.message}`);
                    }
                    
                    const result = await response.json();
                    const audioPart = result?.candidates?.[0]?.content?.parts?.[0];

                    if (audioPart && audioPart.inlineData) {
                        const audioData = audioPart.inlineData.data;
                        const mimeType = audioPart.inlineData.mimeType;

                        const sampleRate = parseInt(mimeType.match(/rate=(\d+)/)[1], 10);
                        const pcmData = base64ToArrayBuffer(audioData);
                        const pcm16 = new Int16Array(pcmData);
                        const wavBlob = pcmToWav(pcm16, sampleRate);
                        const audioUrl = URL.createObjectURL(wavBlob);

                        const audio = new Audio(audioUrl);
                        audio.play();

                        audio.onended = () => {
                            speakButton.disabled = false;
                            speakButton.innerHTML = `<svg class="w-6 h-6" fill="currentColor" viewBox="0 0 24 24"><path d="M14 3.23v2.06c2.89.81 5 3.53 5 6.71s-2.11 5.9-5 6.71v2.06c4.01-.91 7-4.49 7-8.77s-2.99-7.86-7-8.77zM16.5 12c0-2.32-1.4-4.34-3.5-5.32v10.64c2.1-.98 3.5-3 3.5-5.32zM12 21.68V24c4.49-.78 8-4.7 8-9.68s-3.51-8.9-8-9.68v2.32c3.27.81 5.75 3.86 5.75 7.36s-2.48 6.55-5.75 7.36zM9 9H5v6h4l5 5V4L9 9z"/></svg> گوش دادن به برنامه ✨`;
                        };
                    } else {
                        throw new Error("No audio data received.");
                    }

                } catch (error) {
                    console.error("TTS Error:", error);
                    alert("خطایی در تبدیل متن به صدا رخ داد.");
                    speakButton.disabled = false;
                    speakButton.innerHTML = `<svg class="w-6 h-6" fill="currentColor" viewBox="0 0 24 24"><path d="M14 3.23v2.06c2.89.81 5 3.53 5 6.71s-2.11 5.9-5 6.71v2.06c4.01-.91 7-4.49 7-8.77s-2.99-7.86-7-8.77zM16.5 12c0-2.32-1.4-4.34-3.5-5.32v10.64c2.1-.98 3.5-3 3.5-5.32zM12 21.68V24c4.49-.78 8-4.7 8-9.68s-3.51-8.9-8-9.68v2.32c3.27.81 5.75 3.86 5.75 7.36s-2.48 6.55-5.75 7.36zM9 9H5v6h4l5 5V4L9 9z"/></svg> گوش دادن به برنامه ✨`;
                }
            });
        });
    </script>
</body>
</html>
